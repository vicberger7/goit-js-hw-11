{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport cssLoader from 'css-loader';\n\nconst refs = {\n  formEl: document.querySelector('.js-search-form[data-id=\"1\"]'),\n  imageEl: document.querySelector('.js-image-container'),\n};\n\nfunction searchImage(imagename) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const searchParams = new URLSearchParams({\n    key: '42138103-4c7bc70fd41b029843ebe333e',\n    q: imagename,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  const PARAMS = `?${searchParams}`;\n  const url = BASE_URL + PARAMS;\n\n  return fetch(url)\n    .then(res => res.json())\n    .catch(error => {\n      console.error(error);\n    });\n}\n\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction displayImages(images, clearPrevious = true) {\n  const imageContainer = document.querySelector('.js-image-container');\n\n  if (clearPrevious) {\n    imageContainer.innerHTML = '';\n  }\n\n  showLoader();\n  setTimeout(() => {\n    const galleryHTML = images\n      .map(image => {\n        return `\n      <a href=\"${image.largeImageURL}\" class=\"lightbox\">\n        <div class=\"image-card\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          <span>Likes: ${image.likes}</span>\n          <span>Views: ${image.views}</span>\n          <span>Comments: ${image.comments}</span>\n          <span>Downloads: ${image.downloads}</span>\n        </div>\n      </a>\n    `;\n      })\n      .join('');\n\n    imageContainer.innerHTML = galleryHTML;\n\n    hideLoader();\n    lightbox.refresh();\n  }, 2000);\n}\n\nconst lightbox = new SimpleLightbox('.js-image-container  a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nrefs.formEl.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const name = e.target.elements.query.value;\n\n  if (!name) {\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Будь ласка, введіть текст для пошуку',\n    });\n    return;\n  }\n\n  searchImage(name)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        displayImages(data.hits);\n      }\n    })\n    .catch(error => {\n      console.error(error);\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    });\n});\n"],"names":["refs","searchImage","imagename","BASE_URL","PARAMS","url","res","error","loader","showLoader","hideLoader","displayImages","images","clearPrevious","imageContainer","galleryHTML","image","lightbox","SimpleLightbox","e","name","iziToast","data"],"mappings":"wvBAMA,MAAMA,EAAO,CACX,OAAQ,SAAS,cAAc,8BAA8B,EAC7D,QAAS,SAAS,cAAc,qBAAqB,CACvD,EAEA,SAASC,EAAYC,EAAW,CAC9B,MAAMC,EAAW,2BAQXC,EAAS,IAPM,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,CAC8B,GACzBG,EAAMF,EAAWC,EAEvB,OAAO,MAAMC,CAAG,EACb,KAAKC,GAAOA,EAAI,MAAM,EACtB,MAAMC,GAAS,CACd,QAAQ,MAAMA,CAAK,CACzB,CAAK,CACL,CAEA,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OAEvB,SAASC,GAAa,CACpBD,EAAO,MAAM,QAAU,OACzB,CAEA,SAASE,GAAa,CACpBF,EAAO,MAAM,QAAU,MACzB,CAEA,SAASG,EAAcC,EAAQC,EAAgB,GAAM,CACnD,MAAMC,EAAiB,SAAS,cAAc,qBAAqB,EAE/DD,IACFC,EAAe,UAAY,IAG7BL,IACA,WAAW,IAAM,CACf,MAAMM,EAAcH,EACjB,IAAII,GACI;AAAA,iBACEA,EAAM,aAAa;AAAA;AAAA,sBAEdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA,yBACnCA,EAAM,KAAK;AAAA,yBACXA,EAAM,KAAK;AAAA,4BACRA,EAAM,QAAQ;AAAA,6BACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAIrC,EACA,KAAK,EAAE,EAEVF,EAAe,UAAYC,EAE3BL,IACAO,EAAS,QAAO,CACjB,EAAE,GAAI,CACT,CAEA,MAAMA,EAAW,IAAIC,EAAe,yBAA0B,CAC5D,aAAc,MACd,aAAc,GAChB,CAAC,EAEDlB,EAAK,OAAO,iBAAiB,SAAUmB,GAAK,CAC1CA,EAAE,eAAc,EAEhB,MAAMC,EAAOD,EAAE,OAAO,SAAS,MAAM,MAErC,GAAI,CAACC,EAAM,CACTC,EAAS,MAAM,CACb,MAAO,UACP,QAAS,sCACf,CAAK,EACD,MACD,CAEDpB,EAAYmB,CAAI,EACb,KAAKE,GAAQ,CACRA,EAAK,KAAK,SAAW,EACvBD,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EAEDV,EAAcW,EAAK,IAAI,CAE/B,CAAK,EACA,MAAMf,GAAS,CACd,QAAQ,MAAMA,CAAK,EACnBc,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,CACP,CAAK,CACL,CAAC"}