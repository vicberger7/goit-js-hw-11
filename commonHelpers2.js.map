{"version":3,"file":"commonHelpers2.js","sources":["../src/js/interactive-gallery.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport cssLoader from 'css-loader';\n\nconst refs = {\n  formEl: document.querySelector('.js-search-form[data-id=\"1\"]'),\n  imageEl: document.querySelector('.js-image-container'),\n};\n\nfunction searchImage(imagename) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const searchParams = new URLSearchParams({\n    key: '42138103-4c7bc70fd41b029843ebe333e',\n    q: imagename,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  const PARAMS = `?${searchParams}`;\n  const url = BASE_URL + PARAMS;\n\n  return fetch(url)\n    .then(res => res.json())\n    .catch(error => {\n      console.error(error);\n    });\n}\n\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nfunction displayImages(images, clearPrevious = true) {\n  const imageContainer = document.querySelector('.js-image-container');\n\n  if (clearPrevious) {\n    imageContainer.innerHTML = '';\n  }\n\n  const galleryDiv = document.createElement('div');\n  galleryDiv.classList.add('gallery');\n\n  showLoader();\n\n  setTimeout(() => {\n    images.forEach(image => {\n      const cardLink = document.createElement('a');\n      cardLink.href = image.webformatURL;\n      cardLink.classList.add('lightbox');\n\n      const card = document.createElement('div');\n      card.classList.add('image-card');\n\n      const imgElement = document.createElement('img');\n      imgElement.src = image.webformatURL;\n      imgElement.alt = image.tags;\n\n      card.appendChild(imgElement);\n\n      const likesElement = document.createElement('span');\n      likesElement.textContent = `Likes: ${image.likes}`;\n\n      const viewsElement = document.createElement('span');\n      viewsElement.textContent = `Views: ${image.views}`;\n\n      const commentsElement = document.createElement('span');\n      commentsElement.textContent = `Comments: ${image.comments}`;\n\n      const downloadsElement = document.createElement('span');\n      downloadsElement.textContent = `Downloads: ${image.downloads}`;\n\n      card.appendChild(likesElement);\n      card.appendChild(viewsElement);\n      card.appendChild(commentsElement);\n      card.appendChild(downloadsElement);\n\n      imageContainer.appendChild(card);\n    });\n\n    lightbox.refresh();\n    hideLoader();\n  }, 2000);\n}\n\nconst lightbox = new SimpleLightbox('.js-image-container a ', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlightbox.on('show.simplelightbox', function (e) {\n  console.log('Lightbox is shown', e);\n});\n\nrefs.formEl.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const name = e.target.elements.query.value;\n\n  if (!name) {\n    iziToast.error({\n      title: 'Помилка',\n      message: 'Будь ласка, введіть текст для пошуку',\n    });\n    return;\n  }\n\n  searchImage(name)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        displayImages(data.hits);\n      }\n    })\n    .catch(error => {\n      console.error(error);\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    });\n});\n"],"names":["refs","searchImage","imagename","BASE_URL","PARAMS","url","res","error","loader","showLoader","hideLoader","displayImages","images","clearPrevious","imageContainer","image","cardLink","card","imgElement","likesElement","viewsElement","commentsElement","downloadsElement","lightbox","SimpleLightbox","e","name","iziToast","data"],"mappings":"wvBAMA,MAAMA,EAAO,CACX,OAAQ,SAAS,cAAc,8BAA8B,EAC7D,QAAS,SAAS,cAAc,qBAAqB,CACvD,EAEA,SAASC,EAAYC,EAAW,CAC9B,MAAMC,EAAW,2BAQXC,EAAS,IAPM,IAAI,gBAAgB,CACvC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,CAAG,CAC8B,GACzBG,EAAMF,EAAWC,EAEvB,OAAO,MAAMC,CAAG,EACb,KAAKC,GAAOA,EAAI,MAAM,EACtB,MAAMC,GAAS,CACd,QAAQ,MAAMA,CAAK,CACzB,CAAK,CACL,CAEA,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OAEvB,SAASC,GAAa,CACpBD,EAAO,MAAM,QAAU,OACzB,CAEA,SAASE,GAAa,CACpBF,EAAO,MAAM,QAAU,MACzB,CAEA,SAASG,EAAcC,EAAQC,EAAgB,GAAM,CACnD,MAAMC,EAAiB,SAAS,cAAc,qBAAqB,EAE/DD,IACFC,EAAe,UAAY,IAGV,SAAS,cAAc,KAAK,EACpC,UAAU,IAAI,SAAS,EAElCL,IAEA,WAAW,IAAM,CACfG,EAAO,QAAQG,GAAS,CACtB,MAAMC,EAAW,SAAS,cAAc,GAAG,EAC3CA,EAAS,KAAOD,EAAM,aACtBC,EAAS,UAAU,IAAI,UAAU,EAEjC,MAAMC,EAAO,SAAS,cAAc,KAAK,EACzCA,EAAK,UAAU,IAAI,YAAY,EAE/B,MAAMC,EAAa,SAAS,cAAc,KAAK,EAC/CA,EAAW,IAAMH,EAAM,aACvBG,EAAW,IAAMH,EAAM,KAEvBE,EAAK,YAAYC,CAAU,EAE3B,MAAMC,EAAe,SAAS,cAAc,MAAM,EAClDA,EAAa,YAAc,UAAUJ,EAAM,KAAK,GAEhD,MAAMK,EAAe,SAAS,cAAc,MAAM,EAClDA,EAAa,YAAc,UAAUL,EAAM,KAAK,GAEhD,MAAMM,EAAkB,SAAS,cAAc,MAAM,EACrDA,EAAgB,YAAc,aAAaN,EAAM,QAAQ,GAEzD,MAAMO,EAAmB,SAAS,cAAc,MAAM,EACtDA,EAAiB,YAAc,cAAcP,EAAM,SAAS,GAE5DE,EAAK,YAAYE,CAAY,EAC7BF,EAAK,YAAYG,CAAY,EAC7BH,EAAK,YAAYI,CAAe,EAChCJ,EAAK,YAAYK,CAAgB,EAEjCR,EAAe,YAAYG,CAAI,CACrC,CAAK,EAEDM,EAAS,QAAO,EAChBb,GACD,EAAE,GAAI,CACT,CAEA,MAAMa,EAAW,IAAIC,EAAe,yBAA0B,CAC5D,aAAc,MACd,aAAc,GAChB,CAAC,EAEDD,EAAS,GAAG,sBAAuB,SAAUE,EAAG,CAC9C,QAAQ,IAAI,oBAAqBA,CAAC,CACpC,CAAC,EAEDzB,EAAK,OAAO,iBAAiB,SAAUyB,GAAK,CAC1CA,EAAE,eAAc,EAEhB,MAAMC,EAAOD,EAAE,OAAO,SAAS,MAAM,MAErC,GAAI,CAACC,EAAM,CACTC,EAAS,MAAM,CACb,MAAO,UACP,QAAS,sCACf,CAAK,EACD,MACD,CAED1B,EAAYyB,CAAI,EACb,KAAKE,GAAQ,CACRA,EAAK,KAAK,SAAW,EACvBD,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EAEDhB,EAAciB,EAAK,IAAI,CAE/B,CAAK,EACA,MAAMrB,GAAS,CACd,QAAQ,MAAMA,CAAK,EACnBoB,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACV,CAAO,CACP,CAAK,CACL,CAAC"}